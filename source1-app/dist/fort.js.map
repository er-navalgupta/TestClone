{"version":3,"sources":["webpack://FortJs/webpack/bootstrap","webpack://FortJs/./src/abstracts/controller.ts","webpack://FortJs/./src/abstracts/guard.ts","webpack://FortJs/./src/abstracts/index.ts","webpack://FortJs/./src/abstracts/session_provider.ts","webpack://FortJs/./src/abstracts/shield.ts","webpack://FortJs/./src/abstracts/view_engine.ts","webpack://FortJs/./src/abstracts/wall.ts","webpack://FortJs/./src/abstracts/xml_parser.ts","webpack://FortJs/./src/constant.ts","webpack://FortJs/./src/decorators/assign.ts","webpack://FortJs/./src/decorators/default_worker.ts","webpack://FortJs/./src/decorators/guards.ts","webpack://FortJs/./src/decorators/index.ts","webpack://FortJs/./src/decorators/route.ts","webpack://FortJs/./src/decorators/shields.ts","webpack://FortJs/./src/decorators/singleton.ts","webpack://FortJs/./src/decorators/worker.ts","webpack://FortJs/./src/enums/data_type.ts","webpack://FortJs/./src/enums/error_type.ts","webpack://FortJs/./src/enums/etag_type.ts","webpack://FortJs/./src/enums/http_method.ts","webpack://FortJs/./src/enums/http_status_code.ts","webpack://FortJs/./src/enums/index.ts","webpack://FortJs/./src/enums/mime_type.ts","webpack://FortJs/./src/extra/index.ts","webpack://FortJs/./src/extra/memory_session_provider.ts","webpack://FortJs/./src/extra/mustache_view_engine.ts","webpack://FortJs/./src/generics/generic_controller.ts","webpack://FortJs/./src/generics/generic_guard.ts","webpack://FortJs/./src/generics/generic_session_provider.ts","webpack://FortJs/./src/generics/generic_shield.ts","webpack://FortJs/./src/generics/generic_wall.ts","webpack://FortJs/./src/generics/generic_xml_parser.ts","webpack://FortJs/./src/generics/index.ts","webpack://FortJs/./src/global.ts","webpack://FortJs/./src/handlers/controller_result_handler.ts","webpack://FortJs/./src/handlers/file_handler.ts","webpack://FortJs/./src/handlers/index.ts","webpack://FortJs/./src/handlers/injector_handler.ts","webpack://FortJs/./src/handlers/post_handler.ts","webpack://FortJs/./src/handlers/request_handler.ts","webpack://FortJs/./src/handlers/request_handler_helper.ts","webpack://FortJs/./src/handlers/route_handler.ts","webpack://FortJs/./src/helpers/download_result.ts","webpack://FortJs/./src/helpers/file_result.ts","webpack://FortJs/./src/helpers/get_data_type.ts","webpack://FortJs/./src/helpers/get_mime_type_from_extension.ts","webpack://FortJs/./src/helpers/get_view_from_file.ts","webpack://FortJs/./src/helpers/html_result.ts","webpack://FortJs/./src/helpers/index.ts","webpack://FortJs/./src/helpers/is_env_dev.ts","webpack://FortJs/./src/helpers/is_env_production.ts","webpack://FortJs/./src/helpers/json_helper.ts","webpack://FortJs/./src/helpers/json_result.ts","webpack://FortJs/./src/helpers/log_helper.ts","webpack://FortJs/./src/helpers/parse_cookie.ts","webpack://FortJs/./src/helpers/parse_match_route.ts","webpack://FortJs/./src/helpers/promise.ts","webpack://FortJs/./src/helpers/redirect_result.ts","webpack://FortJs/./src/helpers/remove_first_slash.ts","webpack://FortJs/./src/helpers/remove_last_slash.ts","webpack://FortJs/./src/helpers/render_view.ts","webpack://FortJs/./src/helpers/reverse_loop.ts","webpack://FortJs/./src/helpers/text_result.ts","webpack://FortJs/./src/helpers/view_result.ts","webpack://FortJs/./src/helpers/xml_helper.ts","webpack://FortJs/./src/index.ts","webpack://FortJs/./src/models/cookie_manager.ts","webpack://FortJs/./src/models/error_handler.ts","webpack://FortJs/./src/models/file_manager.ts","webpack://FortJs/./src/models/fort.ts","webpack://FortJs/./src/models/http_cookie.ts","webpack://FortJs/./src/models/http_file.ts","webpack://FortJs/./src/models/index.ts","webpack://FortJs/./src/models/router.ts","webpack://FortJs/./src/test_helpers/http_request_stub.ts","webpack://FortJs/./src/test_helpers/http_response_stub.ts","webpack://FortJs/./src/test_helpers/index.ts","webpack://FortJs/./src/test_helpers/init_controller.ts","webpack://FortJs/./src/test_helpers/init_guard.ts","webpack://FortJs/./src/test_helpers/init_shield.ts","webpack://FortJs/./src/test_helpers/init_wall.ts","webpack://FortJs/./src/utils/index.ts","webpack://FortJs/./src/utils/is_array.ts","webpack://FortJs/./src/utils/is_null.ts","webpack://FortJs/./src/utils/is_null_or_empty.ts","webpack://FortJs/external \"content-type\"","webpack://FortJs/external \"etag\"","webpack://FortJs/external \"fresh\"","webpack://FortJs/external \"fs\"","webpack://FortJs/external \"fs-extra\"","webpack://FortJs/external \"http\"","webpack://FortJs/external \"jsontoxml\"","webpack://FortJs/external \"multiparty\"","webpack://FortJs/external \"mustache\"","webpack://FortJs/external \"negotiator\"","webpack://FortJs/external \"path\"","webpack://FortJs/external \"querystring\"","webpack://FortJs/external \"uniqid\"","webpack://FortJs/external \"url\""],"names":[],"mappings":"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","file":"fort.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import { HttpRequest, HttpResponse, ControllerTestData } from \"../types\";\nimport { CookieManager, FileManager } from \"../models\";\nimport { SessionProvider } from \".\";\nimport { initController } from \"../test_helpers\";\n\n\nexport abstract class Controller {\n    request: HttpRequest;\n    response: HttpResponse;\n    query: { [key: string]: string };\n    body?: { [key: string]: any };\n    session: SessionProvider;\n    cookie: CookieManager;\n    param?: { [key: string]: string };\n    data: { [key: string]: any };\n\n    file?: FileManager;\n\n    constructor(...args) {\n\n    }\n\n    initialize(data?: ControllerTestData) {\n        initController(this, data);\n    }\n}","import { HttpRequest, HttpResponse, HttpResult } from \"../types\";\nimport { CookieManager, FileManager } from \"../models\";\nimport { Controller } from \"./controller\";\nimport { SessionProvider } from \"./session_provider\";\nimport { GuardTestData, initGuard } from \"../test_helpers/init_guard\";\n\nexport abstract class Guard implements Controller {\n    request: HttpRequest;\n    response: HttpResponse;\n    query: { [key: string]: string };\n    body: { [key: string]: any };\n    session: SessionProvider;\n    cookie: CookieManager;\n    param?: { [key: string]: string };\n    data: { [key: string]: any };\n    file: FileManager;\n    abstract check(...args): Promise<HttpResult>;\n\n    constructor(...args) {\n\n    }\n\n    initialize(data?: GuardTestData) {\n        return initGuard(this, data);\n    }\n}","export * from './controller';\nexport * from './shield';\nexport * from './session_provider';\nexport * from './guard';\nexport * from './view_engine';\nexport * from './wall';\nexport * from \"./xml_parser\";","import { CookieManager } from \"../models\";\nimport * as getUniqId from \"uniqid\";\nimport { Global } from \"../global\";\nimport { SessionValue } from \"../types\";\n\nexport abstract class SessionProvider {\n\n    sessionId: string;\n    protected cookie: CookieManager;\n\n    abstract get(key: string): Promise<any>;\n    abstract isExist(key: string): Promise<boolean>;\n    abstract getAll(): Promise<SessionValue[]>;\n    abstract set(key: string, val: any): Promise<void>;\n    abstract setMany(values: SessionValue[]): Promise<void[]>;\n    abstract remove(key: string): Promise<void>;\n\n    abstract clear(): Promise<void>;\n\n    protected createSession() {\n        const now = new Date();\n        this.sessionId = getUniqId();\n        this.cookie.addCookie({\n            name: Global.appSessionIdentifier,\n            value: this.sessionId,\n            httpOnly: true,\n            path: \"/\",\n            expires: new Date(now.setMinutes(now.getMinutes() + Global.sessionTimeOut)),\n            maxAge: Global.sessionTimeOut * 60\n        });\n    }\n\n    protected destroySession() {\n        const cookie = this.cookie.getCookie(Global.appSessionIdentifier);\n        cookie.httpOnly = true;\n        cookie.path = \"/\";\n        this.cookie.removeCookie(cookie);\n    }\n}\n\n","import { HttpRequest, HttpResponse, HttpResult } from \"../types\";\nimport { CookieManager } from \"../models\";\nimport { SessionProvider, Controller } from \".\";\nimport { ShieldTestData, initShield } from \"../test_helpers/init_shield\";\n\nexport abstract class Shield implements Controller {\n    workerName: string;\n    request: HttpRequest;\n    response: HttpResponse;\n    query: { [key: string]: string };\n\n    session: SessionProvider;\n    cookie: CookieManager;\n\n    data: { [key: string]: any };\n\n    abstract protect(...args): Promise<HttpResult>;\n\n    constructor(...args) {\n\n    }\n\n    initialize(data?: ShieldTestData) {\n        return initShield(this, data);\n    }\n}\n\n","import { ViewEngineData } from \"../types\";\n\nexport abstract class ViewEngine {\n    abstract render(value: ViewEngineData): Promise<string>;\n}","import { HttpRequest, HttpResponse, HttpResult } from \"../types\";\nimport { CookieManager } from \"../models\";\nimport { SessionProvider, Controller } from \".\";\nimport { WallTestData, initWall } from \"../test_helpers/init_wall\";\n\n\nexport abstract class Wall implements Controller {\n    request: HttpRequest;\n    response: HttpResponse;\n    query: { [key: string]: string };\n    session: SessionProvider;\n    cookie: CookieManager;\n\n    data: { [key: string]: any };\n\n    abstract onIncoming(...args): Promise<HttpResult>;\n    async onOutgoing(...args) {\n        return null;\n    }\n\n    constructor(...args) {\n\n    }\n\n    initialize(data?: WallTestData) {\n        return initWall(this, data);\n    }\n}","export abstract class XmlParser {\n    abstract async parse(xml: string): Promise<string>;\n}","import { Global } from \"./global\";\n/* tslint:disable */\nexport const __ContentType = \"Content-Type\";\nexport const __AppName = \"fort\";\nexport const __Cookie = \"Cookie\";\nexport const __SetCookie = 'Set-Cookie';\nexport const __CurrentPath = process.cwd();\nexport const __ContentLength = \"Content-Length\";\nexport const __Constructor = \"const_constructor\";","import { InjectorHandler } from \"../handlers\";\nimport { __Constructor } from \"../constant\";\n\n// tslint:disable-next-line\nexport const Assign = (value): ParameterDecorator => {\n    return (target: any, methodName: string, paramIndex: number) => {\n        const className: string = target.name || target.constructor.name;\n        if (methodName == null) {\n            methodName = __Constructor;\n        }\n        InjectorHandler.addWorkerValue(className, methodName, paramIndex, value);\n    };\n};","import { RouteHandler } from \"../handlers\";\nimport { HTTP_METHOD } from \"../enums\";\nimport { WorkerInfo } from \"../types\";\n\n// tslint:disable-next-line\nexport const DefaultWorker = (allowedMethods?: HTTP_METHOD[]): MethodDecorator => {\n    return (target: any, methodName: string, descriptor: PropertyDescriptor) => {\n        const className = (target.constructor.name as string);\n        const actionInfo: WorkerInfo = {\n            workerName: methodName,\n            methodsAllowed: allowedMethods == null ? [HTTP_METHOD.Get] : allowedMethods,\n            guards: [],\n            pattern: \"/\",\n            values: []\n        };\n        RouteHandler.addWorker(actionInfo, className);\n    };\n};\n","import { RouteHandler } from \"../handlers\";\nimport { GenericGuard } from \"../generics\";\nimport { Guard } from \"../abstracts/guard\";\n\n// tslint:disable-next-line\nexport const Guards = (value: Array<typeof Guard>): MethodDecorator => {\n    return ((target: any, methodName: string, descriptor: PropertyDescriptor) => {\n        const className = (target.constructor.name as string);\n        RouteHandler.addGuards(value as Array<typeof GenericGuard>, className, methodName);\n    });\n};","export * from './worker';\nexport * from './shields';\nexport * from './guards';\nexport * from './route';\nexport * from './default_worker';\nexport * from './assign';\nexport * from './singleton';","import { RouteHandler } from \"../handlers\";\nimport { removeLastSlash } from \"../helpers\";\n\n// tslint:disable-next-line\nexport const Route = (format: string): MethodDecorator => {\n    return ((target: any, methodName: string, descriptor: PropertyDescriptor) => {\n        const className = (target.constructor.name as string);\n        // remove / from route\n        if (format != null && format !== '/') {\n            format = removeLastSlash(format);\n        }\n        RouteHandler.addPattern(format, className, methodName);\n    });\n};","import { Shield } from \"../abstracts\";\nimport { RouteHandler } from \"../handlers\";\nimport { GenericShield } from \"../generics\";\n \n// tslint:disable-next-line\nexport const Shields = (shieldsValue: Array<typeof Shield>): ClassDecorator => {\n    return (target: any) => {\n        const className = target.name;\n        RouteHandler.addShields(shieldsValue as Array<typeof GenericShield>, className);\n    };\n};","import { InjectorHandler } from \"../handlers\";\nimport { __Constructor } from \"../constant\";\n\n// tslint:disable-next-line\nexport const Singleton = (value): ParameterDecorator => {\n    return (target: any, methodName: string, paramIndex: number) => {\n        const className: string = target.name || target.constructor.name;\n        if (methodName == null || methodName==='constructor') {\n            methodName = __Constructor;\n        }\n        InjectorHandler.addSingleton(className, methodName, paramIndex, value);\n    };\n};","import { HTTP_METHOD } from \"../enums\";\nimport { RouteHandler } from \"../handlers\";\nimport { WorkerInfo } from \"../types\";\n\n// tslint:disable-next-line\nexport const Worker = (allowedMethods?: HTTP_METHOD[]): MethodDecorator => {\n    return (target: any, methodName: string, descriptor: PropertyDescriptor) => {\n        const className = (target.constructor.name as string);\n        const actionInfo: WorkerInfo = {\n            workerName: methodName,\n            methodsAllowed: allowedMethods == null ? [\n                HTTP_METHOD.Delete, HTTP_METHOD.Get, HTTP_METHOD.Post, HTTP_METHOD.Patch, HTTP_METHOD.Put\n            ] : allowedMethods,\n            guards: [],\n            pattern: `/${methodName.toLowerCase()}`,\n            values: []\n        };\n        RouteHandler.addWorker(actionInfo, className);\n    };\n};\n","export enum DATA_TYPE {\n    String = \"string\",\n    Number = \"number\",\n    Array = \"array\",\n    Object = \"object\",\n    Function = \"function\"\n}","export enum ERROR_TYPE {\n    InvalidControllerName = \"invalid_controller_name\",\n    InvalidContentType = \"invalid_content_type\",\n    PortInUse = \"port_in_use\",\n    UndefinedViewEngine = \"undefined_view_engine\"\n}","export enum ETag_Type {\n    Strong = \"strong\",\n    Weak = \"weak\"\n}","export enum HTTP_METHOD {\n    Get = \"GET\",\n    Post = \"POST\",\n    Put = \"PUT\",\n    Patch = \"PATCH\",\n    Delete = \"DELETE\",\n    Options = \"OPTIONS\",\n    Head = \"HEAD\"\n}","export enum HTTP_STATUS_CODE {\n    BadRequest = 400,\n    Unauthorized = 401,\n    Forbidden = 403,\n    NotFound = 404,\n    Ok = 200,\n    Created = 201,\n    NoContent = 204,\n    Redirect = 302,\n    NotModified = 304,\n    MethodNotAllowed = 405,\n    NotAcceptable = 406,\n    InternalServerError = 500,\n}","export * from './mime_type';\nexport * from './http_method';\nexport * from './http_status_code';\nexport * from \"./etag_type\";\nexport * from \"./error_type\";","export enum MIME_TYPE {\n    Text = \"text/plain\",\n    Json = \"application/json\",\n    Html = \"text/html\",\n    FormUrlEncoded = \"application/x-www-form-urlencoded\",\n    Css = \"text/css\",\n    Csv = \"text/csv\",\n    Js = \"application/javascript\",\n    Bmp = \"image/bmp\",\n    Jpeg = \"image/jpeg\",\n    Gif = \"image/gif\",\n    Ico = \"image/x-icon\",\n    Png = \"image/png\",\n    Pdf = \"application/pdf\",\n    Svg = \"image/svg+xml\",\n    Rtf = \"application/rtf\",\n    Xml = \"application/xml\",\n    Xls = \"application/vnd.ms-excel\",\n    Xlsx = \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    Ttf = \"font/ttf\",\n    Woff = \"font/woff\",\n    Woff2 = \"font/woff2\",\n    Eot = \"application/vnd.ms-fontobject\",\n    Otf = \"font/otf\",\n    Swf = \"application/x-shockwave-flash\",\n    Avi = \"video/avi\",\n    FormMultiPart = \"multipart/form-data\"\n\n}","export * from './mustache_view_engine';\nexport * from \"./memory_session_provider\";","\nimport { SessionProvider } from \"../abstracts/session_provider\";\nimport { SessionValue } from \"../types/session_value\";\n\n\ninterface ISessionValueFormat {\n    identifier: string;\n    datas: SessionValue[];\n}\n\nconst sessionValues: ISessionValueFormat[] = [];\n\nexport class MemorySessionProvider extends SessionProvider {\n\n    async get(key: string) {\n        const savedSession = sessionValues.find(q => q.identifier === this.sessionId);\n        if (savedSession != null) {\n            const session = savedSession.datas.find(qry => qry.key === key);\n            return session.value;\n        }\n        return null;\n    }\n\n    async isExist(key: string) {\n        const savedValue = sessionValues.find(q => q.identifier === this.sessionId);\n        if (savedValue == null) {\n            return false;\n        }\n        else {\n            const index = savedValue.datas.findIndex(qry => qry.key === key);\n            return index >= 0;\n        }\n    }\n\n    async getAll() {\n        const savedValue = sessionValues.find(q => q.identifier === this.sessionId);\n        return savedValue == null ? [] : savedValue.datas;\n    }\n\n    async set(key: string, val: any) {\n        const savedValue = sessionValues.find(q => q.identifier === this.sessionId);\n        if (savedValue == null) {\n            this.createSession();\n            sessionValues.push({\n                identifier: this.sessionId,\n                datas: [{\n                    key: key,\n                    value: val\n                }]\n            });\n        }\n        else {\n            const savedSessionData = savedValue.datas.find(q => q.key === key);\n            if (savedSessionData == null) {\n                savedValue.datas.push({\n                    key: key,\n                    value: val\n                });\n            }\n            else {\n                savedSessionData.value = val;\n            }\n        }\n    }\n\n    setMany(values: SessionValue[]) {\n        return Promise.all(\n            values.map(async (value) => {\n                return await this.set(value.key, value.value);\n            })\n        );\n    }\n\n    async remove(key: string) {\n        const savedValue = sessionValues.find(q => q.identifier === this.sessionId);\n        if (savedValue != null) {\n            const index = savedValue.datas.findIndex(q => q.key === key);\n            savedValue.datas.splice(index, 1);\n        }\n    }\n\n    async clear() {\n        // remove session values\n        const index = sessionValues.findIndex(q => q.identifier === this.sessionId);\n        if (index >= 0) {\n            sessionValues.splice(index, 1);\n        }\n        // expire cookie in browser\n        this.destroySession();\n    }\n}","import * as Mustache from \"mustache\";\nimport { ViewEngineData } from \"../types\";\nimport { getViewFromFile } from \"../helpers\";\nimport { ViewEngine } from \"../abstracts\";\n\nexport class MustacheViewEngine implements ViewEngine {\n\n    async render(value: ViewEngineData) {\n        const viewData = await getViewFromFile(value.view);\n        return Mustache.render(viewData, value.model);\n    }\n}","import { Controller } from \"../abstracts\";\n\nexport class GenericController extends Controller {\n    constructor(...args) {\n        super();\n    }\n}","import { Guard } from \"../abstracts\";\nimport { HttpResult } from \"../types\";\n\nexport class GenericGuard extends Guard {\n\n    constructor(...args) {\n        super();\n    }\n\n    check(...args): Promise<HttpResult> {\n        return null;\n    }\n}","import { SessionProvider } from \"../abstracts\";\nimport { SessionValue } from \"../types\";\nimport { CookieManager } from \"../models\";\n\n\nexport class GenericSessionProvider extends SessionProvider {\n    sessionId: string;\n\n    cookie: CookieManager;\n    get() {\n        return null;\n    }\n\n    getAll() {\n        return null;\n    }\n\n    set(key, value) {\n        return null;\n    }\n\n    isExist(key) {\n        return null;\n    }\n\n    remove(key) {\n        return null;\n    }\n\n    setMany(values: SessionValue[]): Promise<null> {\n        return null;\n    }\n\n    async clear() {\n\n    }\n}","import { Shield } from \"../abstracts\";\nimport { HttpResult } from \"../types\";\n\nexport class GenericShield extends Shield {\n    constructor(...args) {\n        super();\n    }\n    \n    protect(...args): Promise<HttpResult> {\n        return null;\n    }\n}","import { Wall } from \"../abstracts\";\nimport { HttpResult } from \"../types\";\n\nexport class GenericWall extends Wall {\n    constructor(...args) {\n        super();\n    }\n    onIncoming(...args): Promise<HttpResult> {\n        return null;\n    }\n}","import { XmlParser } from \"../abstracts\";\nimport { IException } from \"../interfaces\";\n\nexport class GenericXmlParser implements XmlParser {\n    async parse(xml: string): Promise<string> {\n        // tslint:disable-next-line\n        throw {\n            message: \"no xml parser configured\"\n        } as IException;\n    }\n}","export * from './generic_guard';\nexport * from './generic_shield';\nexport * from './generic_session_provider';\nexport * from \"./generic_wall\";\nexport * from \"./generic_controller\";\nexport * from './generic_xml_parser';","import * as http from \"http\";\nimport { ErrorHandler } from \"./models\";\nimport { ViewEngine, XmlParser } from \"./abstracts\";\nimport { EtagOption, FolderMap } from \"./types\";\nimport { GenericSessionProvider, GenericWall } from \"./generics\";\n\nexport class Global {\n    static request: http.IncomingMessage;\n    static response: http.ServerResponse;\n    static port: number;\n    static viewPath: string;\n    static shouldParseCookie: boolean;\n    static shouldParsePost: boolean;\n    static sessionProvider: typeof GenericSessionProvider;\n    static sessionTimeOut?: number;\n    static viewEngine: ViewEngine;\n    static walls: Array<typeof GenericWall> = [];\n    static errorHandler: typeof ErrorHandler;\n    static connectonKeepAliveTimeout?: number;\n\n    static appName?: string;\n\n    static eTag?: EtagOption;\n\n    static folders?: FolderMap[];\n    static appSessionIdentifier: string;\n    static xmlParser: typeof XmlParser;\n}","\nimport { HttpResult, HttpFormatResult } from \"../types\";\nimport { __SetCookie, __ContentType } from \"../constant\";\nimport { MIME_TYPE, HTTP_STATUS_CODE } from \"../enums\";\nimport { FileHandler } from \"./file_handler\";\nimport * as path from 'path';\nimport { XmlHelper, textResult } from \"../helpers\";\n\nexport class ControllerResultHandler extends FileHandler {\n    private controllerResult_: HttpResult;\n\n    private getDataBasedOnMimeType_(mimeType: MIME_TYPE) {\n        switch (mimeType) {\n            case MIME_TYPE.Json:\n            case MIME_TYPE.Text:\n            case MIME_TYPE.Html:\n                if (typeof this.controllerResult_.responseData === 'object') {\n                    return JSON.stringify(this.controllerResult_.responseData);\n                }\n                break;\n            case MIME_TYPE.Xml:\n                if (typeof this.controllerResult_.responseData === 'object') {\n                    return XmlHelper.fromJsToXml(this.controllerResult_.responseData);\n                }\n                break;\n        }\n        return this.controllerResult_.responseData;\n    }\n\n    private endResponse_(negotiateMimeType: MIME_TYPE) {\n        let data;\n        try {\n            data = this.getDataBasedOnMimeType_(negotiateMimeType);\n        }\n        catch (ex) {\n            this.onErrorOccured(ex);\n            return;\n        }\n\n        this.response.writeHead(this.controllerResult_.statusCode || HTTP_STATUS_CODE.Ok,\n            { [__ContentType]: negotiateMimeType });\n        this.response.end(data);\n    }\n\n    private handleRedirectResult_() {\n        this.response.setHeader('Location', this.controllerResult_.responseData);\n        this.response.writeHead(this.controllerResult_.statusCode || HTTP_STATUS_CODE.Ok,\n            { 'Location': this.controllerResult_.responseData });\n        this.response.end();\n    }\n\n    private handleFormatResult_() {\n        const negotiateMimeType = this.getContentTypeFromNegotiationHavingMultipleTypes(Object.keys((this.controllerResult_ as HttpFormatResult).responseFormat) as MIME_TYPE[]);\n        const key = Object.keys((this.controllerResult_ as HttpFormatResult).responseFormat).find(qry => qry === negotiateMimeType);\n        if (key != null) {\n            this.controllerResult_.responseData = (this.controllerResult_ as HttpFormatResult).responseFormat[key]();\n            this.endResponse_(negotiateMimeType);\n        }\n        else {\n            this.onNotAcceptableRequest();\n        }\n    }\n\n    private handleFileResult_() {\n        const result = this.controllerResult_;\n        const parsedPath = path.parse(result.file.filePath);\n        if (result.file.shouldDownload === true) {\n            const fileName = result.file.alias == null ? parsedPath.name : result.file.alias;\n            this.response.setHeader(\n                \"Content-Disposition\",\n                `attachment;filename=${fileName}${parsedPath.ext}`\n            );\n        }\n        this.handleFileRequestFromAbsolutePath(result.file.filePath, parsedPath.ext);\n    }\n\n    onTerminationFromWall(result: HttpResult | HttpFormatResult) {\n        this.handleFinalResult_(result);\n    }\n\n    private handleFinalResult_(result: HttpResult | HttpFormatResult) {\n        result = result || textResult(\"\");\n        this.controllerResult_ = result as HttpResult;\n\n        ((this.cookieManager as any).responseCookie_ as string[]).forEach(value => {\n            this.response.setHeader(__SetCookie, value);\n        });\n\n        if ((result as HttpResult).shouldRedirect == null || (result as HttpResult).shouldRedirect === false) {\n            if ((result as HttpFormatResult).responseFormat == null) {\n                if ((result as HttpResult).file == null) {\n                    const contentType = (result as HttpResult).contentType || MIME_TYPE.Text;\n                    const negotiateMimeType = this.getContentTypeFromNegotiation(contentType) as MIME_TYPE;\n                    if (negotiateMimeType != null) {\n                        this.endResponse_(negotiateMimeType);\n                    }\n                    else {\n                        this.onNotAcceptableRequest();\n                    }\n                }\n                else {\n                    this.handleFileResult_();\n                }\n            }\n            else {\n                this.handleFormatResult_();\n            }\n        }\n        else {\n            this.handleRedirectResult_();\n        }\n    }\n\n    async  onResultFromController(result: HttpResult | HttpFormatResult) {\n        try {\n            await this.runWallOutgoing();\n        } catch (ex) {\n            this.onErrorOccured(ex);\n            return;\n        }\n        this.handleFinalResult_(result);\n    }\n}","import { HTTP_STATUS_CODE, MIME_TYPE, ETag_Type } from \"../enums\";\nimport { Global } from \"../global\";\nimport * as path from \"path\";\nimport { __ContentType } from \"../constant\";\nimport { RequestHandlerHelper } from \"./request_handler_helper\";\nimport * as Fs from \"fs\";\nimport { getMimeTypeFromExtension, promise } from \"../helpers\";\nimport * as etag from \"etag\";\nimport * as fresh from \"fresh\";\nimport { isNullOrEmpty } from \"../utils\";\n\ntype FileInfo = {\n    folder: string,\n    file: string;\n};\nexport class FileHandler extends RequestHandlerHelper {\n\n    private getFileInfoFromUrl_(urlPath: string) {\n        const splittedValue = urlPath.split(\"/\");\n        const fileInfo = {\n            file: \"\"\n        } as FileInfo;\n        if (splittedValue.length > 2 || !isNullOrEmpty(path.parse(urlPath).ext)) {\n            fileInfo.folder = splittedValue[1];\n            fileInfo.file = splittedValue.splice(2).join(\"/\");\n            return fileInfo;\n        }\n        fileInfo.folder = splittedValue[1];\n        return fileInfo;\n\n    }\n\n    private getFileStats_(filePath) {\n        return promise<Fs.Stats>((res, rej) => {\n            Fs.lstat(filePath, (err, status) => {\n                if (err) {\n                    if (err.code === 'ENOENT') {\n                        res(null);\n                    }\n                    else {\n                        rej(err);\n                    }\n                }\n                else {\n                    res(status);\n                }\n            });\n        });\n    }\n\n    protected handleFileRequestFromAbsolutePath(absolutePath: string, fileType: string) {\n        this.getFileStats_(absolutePath).then(fileInfo => {\n            if (fileInfo != null) {\n                if (fileInfo.isDirectory() === true) {\n                    this.handleFileRequestForPath_(absolutePath);\n                }\n                else {\n                    this.sendFile_(absolutePath, fileType, fileInfo);\n                }\n            }\n            else {\n                this.onNotFound();\n            }\n        }).catch(ex => {\n            this.onErrorOccured(ex);\n        });\n    }\n\n    private checkForFolderAllowAndReturnPath_(urlPath: string) {\n        const fileInfo = this.getFileInfoFromUrl_(urlPath);\n        const getAbsPath = function () {\n            const folder = Global.folders.find(qry => qry.alias === fileInfo.folder);\n            if (folder != null) {\n                return path.join(folder.path, fileInfo.file);\n            }\n            return null;\n        };\n        let absPath = getAbsPath();\n        if (absPath == null) {\n            fileInfo.folder = \"/\";\n            fileInfo.file = urlPath;\n            absPath = getAbsPath();\n        }\n        return absPath;\n    }\n\n    protected handleFileRequest(urlPath: string) {\n        const extension = path.parse(urlPath).ext;\n        const absFilePath = this.checkForFolderAllowAndReturnPath_(urlPath);\n        if (absFilePath != null) {\n            this.handleFileRequestFromAbsolutePath(absFilePath, extension);\n        }\n        else {\n            this.onNotFound();\n        }\n    }\n\n    /**\n     * process folders handling asuuming path is folder.\n     * Please check whether the file is folder before calling this function\n     *\n     * @private\n     * @param {string} filePath\n     * @param {Fs.Stats} fileInfo\n     * @returns\n     * @memberof FileHandler\n     */\n    private handleFileRequestForPath_(absolutePath: string) {\n\n        absolutePath = path.join(absolutePath, \"index.html\");\n        this.getFileStats_(absolutePath).then(fileInfo => {\n            if (fileInfo != null) {\n                const fileType = MIME_TYPE.Html;\n                this.sendFile_(absolutePath, fileType, fileInfo);\n            }\n            else {\n                this.onNotFound();\n            }\n        }).catch(ex => {\n            this.onErrorOccured(ex);\n        });\n    }\n\n    private isClientHasFreshFile_(lastModified: string, etagValue: string) {\n        return fresh(this.request.headers, {\n            'etag': etagValue,\n            'last-modified': lastModified\n        });\n    }\n\n    private sendFile_(filePath: string, fileType: string, fileInfo: Fs.Stats) {\n        this.runWallOutgoing().then(() => {\n            let mimeType;\n            if (fileType[0] === '.') { // its extension\n                mimeType = getMimeTypeFromExtension(fileType);\n            }\n            else { // mime type\n                mimeType = fileType;\n            }\n            const negotiateMimeType = this.getContentTypeFromNegotiation(mimeType) as MIME_TYPE;\n            if (negotiateMimeType != null) {\n                const lastModified = fileInfo.mtime.toUTCString();\n                const eTagValue = etag(fileInfo, {\n                    weak: Global.eTag.type === ETag_Type.Weak\n                });\n                if (this.isClientHasFreshFile_(lastModified, eTagValue)) { // client has fresh file\n                    this.response.statusCode = HTTP_STATUS_CODE.NotModified;\n                    this.response.end();\n                }\n                else {\n                    this.response.writeHead(HTTP_STATUS_CODE.Ok, {\n                        [__ContentType]: mimeType,\n                        'Etag': eTagValue,\n                        'Last-Modified': lastModified\n                    });\n                    const readStream = Fs.createReadStream(filePath);\n                    // Handle non-existent file\n                    readStream.on('error', this.onErrorOccured.bind(this));\n                    readStream.pipe(this.response);\n                }\n            }\n            else {\n                this.onNotAcceptableRequest();\n            }\n        }).catch(ex => {\n            this.onErrorOccured(ex);\n        });\n    }\n}","export * from \"./route_handler\";\nexport * from \"./request_handler\";\nexport * from \"./file_handler\";\nexport * from \"./request_handler_helper\";\nexport * from \"./controller_result_handler\";\nexport * from \"./post_handler\";\nexport * from './injector_handler';","import { __Constructor } from \"../constant\";\n\ntype InjectorValue = {\n    className: string;\n    methods: {\n        [methodName: string]: any[]\n    }\n};\nconst injectorValues: InjectorValue[] = [];\nconst injectorValuesStore: any[] = [];\nconst singletons: {\n    [className: string]: number\n} = {};\nexport class InjectorHandler {\n\n    static addWorkerValue(className: string, methodName: string, paramIndex, paramValue, shouldFindIndex = true): number {\n        if (shouldFindIndex === true && injectorValuesStore.indexOf(paramValue) < 0) {\n            paramValue = injectorValuesStore.push(paramValue) - 1;\n        }\n\n        const savedValue = injectorValues.find(x => x.className === className);\n        const value: InjectorValue = {\n            className: className,\n            methods: {\n                [methodName]: [paramValue]\n            }\n        };\n        if (savedValue == null) {\n            injectorValues.push(value);\n        }\n        else {\n            const savedMethod = savedValue.methods[methodName];\n            if (savedMethod == null) {\n                savedValue.methods[methodName] = [paramValue];\n            }\n            else {\n                savedValue.methods[methodName].splice(paramIndex, 0, paramValue);\n            }\n        }\n        return paramValue;\n    }\n\n    static getConstructorValues(className: string) {\n        return this.getMethodValues(className, __Constructor);\n    }\n\n    static getMethodValues(className: string, methodName: string) {\n        const savedValue = injectorValues.find(qry => qry.className === className);\n        if (savedValue != null) {\n            const methodArgs = savedValue.methods[methodName];\n            if (methodArgs != null) {\n                return methodArgs.map(val => {\n                    return injectorValuesStore[val];\n                });\n            }\n        }\n        return [];\n    }\n\n    static addSingleton(className: string, methodName: string, paramIndex, paramValue) {\n        const singletonClassName = paramValue.name;\n        if (singletonClassName) {\n            if (singletons[singletonClassName] == null) {\n                singletons[singletonClassName] = InjectorHandler.addWorkerValue(className, methodName, paramIndex, new paramValue());\n            }\n            else {\n                InjectorHandler.addWorkerValue(className, methodName, paramIndex, singletons[singletonClassName], false);\n            }\n        }\n    }\n}","import { ControllerResultHandler } from \"./controller_result_handler\";\nimport { promise, JsonHelper } from \"../helpers\";\nimport { __ContentType } from \"../constant\";\nimport { MIME_TYPE } from \"../enums\";\nimport * as ContentType from \"content-type\";\nimport * as QueryString from 'querystring';\nimport * as Multiparty from \"multiparty\";\nimport { MultiPartParseResult } from \"../types\";\nimport { FileManager } from \"../models\";\nimport { Global } from \"../global\";\n\n\nexport class PostHandler extends ControllerResultHandler {\n    protected body: any;\n    protected file: FileManager = new FileManager();\n\n    private getPostRawData_(): Promise<string> {\n        const body = [];\n        return promise((res, rej) => {\n            this.request.on('data', (chunk) => {\n                body.push(chunk);\n            }).on('end', () => {\n                const bodyBuffer = Buffer.concat(body);\n                res(bodyBuffer.toString());\n            }).on(\"error\", function (err) {\n                rej(err);\n            });\n        });\n    }\n\n    private parseMultiPartData_(): Promise<MultiPartParseResult> {\n        return promise((res, rej) => {\n            new Multiparty.Form().parse(this.request, (err, fields, files) => {\n                if (err) {\n                    rej(err);\n                }\n                else {\n                    const result: MultiPartParseResult = {\n                        field: {},\n                        file: {}\n                    };\n                    for (const field in fields) {\n                        result.field[field] = fields[field].length === 1 ? fields[field][0] : fields[field];\n                    }\n                    for (const file in files) {\n                        result.file[file] = files[file].length === 1 ? files[file][0] : files[file];\n                    }\n                    res(result);\n                }\n            });\n        });\n    }\n\n    protected async parsePostData() {\n\n        let postData;\n\n        let contentType = this.request.headers[__ContentType] || this.request.headers[\"content-type\"];\n        if (contentType != null) {\n            contentType = ContentType.parse(contentType as string).type;\n        }\n        if (contentType === MIME_TYPE.FormMultiPart) {\n            const result = await this.parseMultiPartData_();\n            postData = result.field;\n            this.file.files = result.file as any;\n        }\n        else {\n            const bodyDataAsString = await this.getPostRawData_();\n            switch (contentType) {\n                case MIME_TYPE.Json:\n                    postData = JsonHelper.parse(bodyDataAsString);\n                    break;\n                case MIME_TYPE.Text:\n                case MIME_TYPE.Html:\n                    postData = bodyDataAsString; break;\n                case MIME_TYPE.FormUrlEncoded:\n                    postData = QueryString.parse(bodyDataAsString); break;\n                case MIME_TYPE.Xml:\n                    postData = new (Global as any).xmlParser().parse(bodyDataAsString);\n                    break;\n                default:\n                    postData = {};\n            }\n        }\n\n        return postData;\n\n    }\n}","import * as http from \"http\";\nimport * as url from 'url';\nimport { Controller } from \"../abstracts\";\nimport { __ContentType, __AppName, __Cookie, __SetCookie } from \"../constant\";\nimport { Global } from \"../global\";\nimport { parseCookie, parseAndMatchRoute } from \"../helpers\";\nimport { CookieManager } from \"../models\";\nimport { GenericSessionProvider, GenericGuard } from \"../generics\";\nimport { RouteMatch, HttpResult, HttpRequest, HttpResponse } from \"../types\";\nimport { HTTP_METHOD } from \"../enums\";\nimport { PostHandler } from \"./post_handler\";\nimport { RouteHandler } from \"./route_handler\";\nimport { InjectorHandler } from \"./injector_handler\";\n\n\nexport class RequestHandler extends PostHandler {\n\n    private session_: GenericSessionProvider;\n    private query_: any;\n    private data_ = {};\n    private routeMatchInfo_: RouteMatch;\n\n\n    constructor(request: http.IncomingMessage, response: http.ServerResponse) {\n        super();\n        this.request = request;\n        this.response = response;\n        this.registerEvents_();\n    }\n\n    private registerEvents_() {\n        this.request.on('error', this.onBadRequest.bind(this));\n        this.response.on('error', this.onErrorOccured.bind(this));\n    }\n\n    private executeWallIncoming_() {\n        return Promise.all(Global.walls.map((wall) => {\n            const constructorArgsValues = InjectorHandler.getConstructorValues(wall.name);\n            const wallObj = new wall(...constructorArgsValues);\n            wallObj.cookie = this.cookieManager;\n            wallObj.session = this.session_;\n            wallObj.request = this.request as HttpRequest;\n            wallObj.response = this.response as HttpResponse;\n            wallObj.data = this.data_;\n            wallObj.query = this.query_;\n            this.wallInstances.push(wallObj);\n            const methodArgsValues = InjectorHandler.getMethodValues(wall.name, 'onIncoming');\n            return wallObj.onIncoming(...methodArgsValues);\n        }));\n    }\n\n    private runController_() {\n        const constructorValues = InjectorHandler.getConstructorValues(this.routeMatchInfo_.controller.name);\n        const controllerObj: Controller = new this.routeMatchInfo_.controller(...constructorValues);\n        controllerObj.request = this.request as HttpRequest;\n        controllerObj.response = this.response;\n        controllerObj.query = this.query_;\n        controllerObj.body = this.body;\n        controllerObj.session = this.session_;\n        controllerObj.cookie = this.cookieManager;\n        controllerObj.param = this.routeMatchInfo_.params;\n        controllerObj.data = this.data_;\n        controllerObj.file = this.file;\n        const methodArgsValues = InjectorHandler.getMethodValues(this.routeMatchInfo_.controller.name, this.routeMatchInfo_.workerInfo.workerName);\n        controllerObj[this.routeMatchInfo_.workerInfo.workerName](...methodArgsValues).then(\n            this.onResultFromController.bind(this)\n        ).catch(this.onErrorOccured.bind(this));\n    }\n\n    private executeShieldsProtection_() {\n        return Promise.all(this.routeMatchInfo_.shields.map(shield => {\n            const constructorArgsValues = InjectorHandler.getConstructorValues(shield.name);\n            const shieldObj = new shield(...constructorArgsValues);\n            shieldObj.cookie = this.cookieManager;\n            shieldObj.query = this.query_;\n            shieldObj.session = this.session_;\n            shieldObj.request = this.request as HttpRequest;\n            shieldObj.response = this.response as HttpResponse;\n            shieldObj.data = this.data_;\n            shieldObj.workerName = this.routeMatchInfo_.workerInfo.workerName;\n            const methodArgsValues = InjectorHandler.getMethodValues(shield.name, 'protect');\n            return shieldObj.protect(...methodArgsValues);\n        }));\n    }\n\n    private executeGuardsCheck_(guards: Array<typeof GenericGuard>) {\n        return Promise.all(guards.map(guard => {\n            const constructorArgsValues = InjectorHandler.getConstructorValues(guard.name);\n            const guardObj = new guard(...constructorArgsValues);\n            guardObj.body = this.body;\n            guardObj.cookie = this.cookieManager;\n            guardObj.query = this.query_;\n            guardObj.session = this.session_;\n            guardObj.request = this.request as HttpRequest;\n            guardObj.response = this.response as HttpResponse;\n            guardObj.data = this.data_;\n            guardObj.file = this.file;\n            guardObj.param = this.routeMatchInfo_.params;\n            const methodArgsValues = InjectorHandler.getMethodValues(guard.name, 'check');\n            return guardObj.check(...methodArgsValues);\n        }));\n    }\n\n    private parseCookieFromRequest_() {\n        if (Global.shouldParseCookie === true) {\n            const rawCookie = (this.request.headers[__Cookie] || this.request.headers[\"cookie\"]) as string;\n            const parsedCookies = parseCookie(rawCookie);\n            this.session_ = new Global.sessionProvider();\n            this.cookieManager = new CookieManager(parsedCookies);\n            this.session_.sessionId = parsedCookies[Global.appSessionIdentifier];\n            this.session_.cookie = this.cookieManager;\n        }\n        else {\n            this.cookieManager = new CookieManager({});\n        }\n    }\n\n    private setPreHeader_() {\n        this.response.setHeader('X-Powered-By', Global.appName);\n        this.response.setHeader('Vary', 'Accept-Encoding');\n        this.response.sendDate = true;\n    }\n\n    private async onRouteMatched_() {\n        const actionInfo = this.routeMatchInfo_.workerInfo;\n        if (actionInfo == null) {\n            if (this.request.method === HTTP_METHOD.Options) {\n                this.onRequestOptions(this.routeMatchInfo_.allowedHttpMethod);\n            }\n            else {\n                this.onMethodNotAllowed(this.routeMatchInfo_.allowedHttpMethod);\n            }\n        }\n        else {\n            let shieldProtectionResult;\n            try {\n                shieldProtectionResult = await this.executeShieldsProtection_();\n            }\n            catch (ex) {\n                this.onErrorOccured(ex);\n                return;\n            }\n            const responseByShield = shieldProtectionResult.find(qry => qry != null);\n            if (responseByShield == null) {\n                try {\n                    await this.handlePostData();\n                }\n                catch (ex) {\n                    this.onBadRequest(ex);\n                    return;\n                }\n                let guardsCheckResult;\n                try {\n                    guardsCheckResult = await this.executeGuardsCheck_(actionInfo.guards);\n                }\n                catch (ex) {\n                    this.onErrorOccured(ex);\n                    return;\n                }\n                const responseByGuard = guardsCheckResult.find(qry => qry != null);\n                if (responseByGuard == null) {\n                    this.runController_();\n                }\n                else {\n                    this.onResultFromController(responseByGuard);\n                }\n            }\n            else {\n                this.onResultFromController(responseByShield);\n            }\n        }\n    }\n\n    private async execute_() {\n        // there are many methods being called here, which has chances of throwing error\n        // so using global level try block\n        try {\n            const urlDetail = url.parse(this.request.url, true);\n            this.query_ = urlDetail.query;\n            this.parseCookieFromRequest_();\n            const wallProtectionResult = await this.executeWallIncoming_();\n            const responseByWall: HttpResult = wallProtectionResult.find(qry => qry != null);\n            if (responseByWall == null) {\n                const pathUrl = urlDetail.pathname;\n                const requestMethod = this.request.method as HTTP_METHOD;\n                this.routeMatchInfo_ = parseAndMatchRoute(pathUrl.toLowerCase(), requestMethod);\n                if (this.routeMatchInfo_ == null) { // no route matched\n                    // it may be a file or folder then\n                    this.handleFileRequest(pathUrl);\n                }\n                else {\n                    this.onRouteMatched_();\n                }\n            }\n            else {\n                this.onTerminationFromWall(responseByWall);\n            }\n        }\n        catch (ex) {\n            this.onErrorOccured(ex);\n        }\n    }\n\n    async handlePostData() {\n        if (this.request.method === HTTP_METHOD.Get) {\n            this.body = {};\n        }\n        else if (Global.shouldParsePost === true) {\n            this.body = await this.parsePostData();\n        }\n    }\n\n    async handle() {\n        this.setPreHeader_();\n        this.execute_();\n    }\n}","import { HTTP_STATUS_CODE, MIME_TYPE, HTTP_METHOD } from \"../enums\";\nimport * as http from \"http\";\nimport { __ContentType } from \"../constant\";\nimport { Global } from \"../global\";\nimport * as Negotiator from \"negotiator\";\nimport { CookieManager } from \"../models\";\nimport { Wall } from \"../abstracts\";\nimport { IException } from \"../interfaces\";\nimport { JsonHelper, reverseLoop } from \"../helpers\";\nimport { isNull } from \"../utils\";\nimport { InjectorHandler } from \"./injector_handler\";\n\n\nexport class RequestHandlerHelper {\n    protected cookieManager: CookieManager;\n    protected response: http.ServerResponse;\n    protected request: http.IncomingMessage;\n\n    protected wallInstances: Wall[] = [];\n\n    protected runWallOutgoing() {\n        const outgoingResults: Array<Promise<any>> = [];\n        reverseLoop(this.wallInstances, (value: Wall) => {\n            const methodArgsValues = InjectorHandler.getMethodValues(value.constructor.name, 'onOutgoing');\n            outgoingResults.push(value.onOutgoing(methodArgsValues));\n        });\n        return Promise.all(outgoingResults);\n    }\n\n    protected getContentTypeFromNegotiation(type: MIME_TYPE) {\n        const negotiator = new Negotiator(this.request);\n        let availableTypes: MIME_TYPE[] = this.getAvailableTypes_(type);\n        if (availableTypes == null) {\n            availableTypes = [type];\n        }\n        return negotiator.mediaType(availableTypes) as MIME_TYPE;\n    }\n\n    protected getContentTypeFromNegotiationHavingMultipleTypes(types: MIME_TYPE[]) {\n        const negotiator = new Negotiator(this.request);\n        return negotiator.mediaType(types) as MIME_TYPE;\n    }\n\n    private getAvailableTypes_(type: MIME_TYPE) {\n        switch (type) {\n            case MIME_TYPE.Json:\n            case MIME_TYPE.Xml:\n                return [MIME_TYPE.Json, MIME_TYPE.Xml];\n            case MIME_TYPE.Html:\n            case MIME_TYPE.Css:\n            case MIME_TYPE.Csv:\n            case MIME_TYPE.Js:\n            case MIME_TYPE.Rtf:\n            case MIME_TYPE.Text:\n                return [MIME_TYPE.Text, MIME_TYPE.Html, MIME_TYPE.Js,\n                MIME_TYPE.Css, MIME_TYPE.Rtf, MIME_TYPE.Csv];\n        }\n        return null;\n    }\n\n    protected async onBadRequest(error) {\n        let errMessage;\n        try {\n            await this.runWallOutgoing();\n            errMessage = await new Global.errorHandler().onBadRequest(error);\n        }\n        catch (ex) {\n            return this.onErrorOccured(ex);\n        }\n        this.response.writeHead(HTTP_STATUS_CODE.BadRequest, { [__ContentType]: MIME_TYPE.Html });\n        this.response.end(errMessage);\n    }\n\n    protected async onForbiddenRequest() {\n        let errMessage;\n        try {\n            await this.runWallOutgoing();\n            errMessage = await new Global.errorHandler().onForbiddenRequest();\n        }\n        catch (ex) {\n            return this.onErrorOccured(ex);\n        }\n        this.response.writeHead(HTTP_STATUS_CODE.Forbidden, { [__ContentType]: MIME_TYPE.Html });\n        this.response.end(errMessage);\n    }\n\n    protected async onNotAcceptableRequest() {\n        let errMessage;\n        try {\n            await this.runWallOutgoing();\n            errMessage = await new Global.errorHandler().onNotAcceptableRequest();\n        }\n        catch (ex) {\n            return this.onErrorOccured(ex);\n        }\n        this.response.writeHead(HTTP_STATUS_CODE.NotAcceptable, { [__ContentType]: MIME_TYPE.Html });\n        this.response.end(errMessage);\n    }\n\n    protected async onNotFound() {\n        let errMessage;\n        try {\n            await this.runWallOutgoing();\n            errMessage = await new Global.errorHandler().onNotFound(this.request.url);\n        }\n        catch (ex) {\n            return this.onErrorOccured(ex);\n        }\n        this.response.writeHead(HTTP_STATUS_CODE.NotFound, { [__ContentType]: MIME_TYPE.Html });\n        this.response.end(errMessage);\n    }\n\n    protected async onMethodNotAllowed(allowedMethods: HTTP_METHOD[]) {\n        let errMessage;\n        try {\n            await this.runWallOutgoing();\n            errMessage = await new Global.errorHandler().onMethodNotAllowed();\n        }\n        catch (ex) {\n            return this.onErrorOccured(ex);\n        }\n        this.response.setHeader(\"Allow\", allowedMethods.join(\",\"));\n        this.response.writeHead(HTTP_STATUS_CODE.MethodNotAllowed, { [__ContentType]: MIME_TYPE.Html });\n        this.response.end(errMessage);\n    }\n\n    protected async onErrorOccured(error) {\n        if (typeof error === 'string') {\n            error = {\n                message: error\n            } as IException;\n        }\n        let errMessage;\n        try {\n            await this.runWallOutgoing();\n            errMessage = await new Global.errorHandler().onServerError(error);\n        }\n        catch (ex) {\n            this.response.writeHead(HTTP_STATUS_CODE.InternalServerError, { [__ContentType]: MIME_TYPE.Html });\n            this.response.end(JsonHelper.stringify(ex));\n            return;\n        }\n        this.response.writeHead(HTTP_STATUS_CODE.InternalServerError, { [__ContentType]: MIME_TYPE.Html });\n        this.response.end(errMessage);\n    }\n\n    protected async onRequestOptions(allowedMethods: HTTP_METHOD[]) {\n        try {\n            await this.runWallOutgoing();\n        }\n        catch (ex) {\n            return this.onErrorOccured(ex);\n        }\n        this.response.setHeader(\"Allow\", allowedMethods.join(\",\"));\n        this.response.writeHead(HTTP_STATUS_CODE.Ok, { [__ContentType]: MIME_TYPE.Html });\n        this.response.end(\"\");\n    }\n}","import { RouteInfo, WorkerInfo, ParentRoute } from \"../types\";\nimport { GenericShield, GenericGuard } from \"../generics\";\nimport { isNull } from \"../utils\";\n\nconst routerCollection: RouteInfo[] = [];\n\nconst getActionPattern = (parentRoute: ParentRoute, pattern: string) => {\n    return (isNull(parentRoute.path) || parentRoute.path === \"*\") ? pattern : `/${parentRoute.path}${pattern}`;\n};\n\nexport class RouteHandler {\n\n    static get routerCollection() {\n        return routerCollection;\n    }\n\n    static addToRouterCollection(value: ParentRoute) {\n        const route = routerCollection.find(x => x.controllerName === value.controller.name);\n        if (route == null) {\n            routerCollection.push({\n                workers: [],\n                controller: value.controller as any,\n                controllerName: value.controller.name,\n                path: value.path,\n                shields: [],\n                values: []\n            });\n        }\n        else {\n            route.controller = value.controller as any;\n            route.path = value.path;\n            // change pattern value since we have controller name now.\n            route.workers.forEach(actionInfo => {\n                actionInfo.pattern = getActionPattern(value, actionInfo.pattern);\n            });\n        }\n    }  \n\n    static addShields(shields: Array<typeof GenericShield>, className: string) {\n        const index = routerCollection.findIndex(x => x.controllerName === className);\n        if (index < 0) {\n            routerCollection.push({\n                workers: [],\n                controller: null,\n                controllerName: className,\n                shields: shields,\n                path: null,\n                values: []\n            });\n        }\n        else {\n            routerCollection[index].shields = shields;\n        }\n    }\n\n    static addWorker(newAction: WorkerInfo, className: string) {\n        const router = routerCollection.find(x => x.controllerName === className);\n        if (router == null) {\n            routerCollection.push({\n                workers: [newAction],\n                controller: null,\n                controllerName: className,\n                shields: [],\n                path: null,\n                values: []\n            });\n        }\n        else {\n            const savedAction = router.workers.find(val => val.workerName === newAction.workerName);\n            if (savedAction == null) {\n                newAction.pattern = getActionPattern(router, newAction.pattern);\n                router.workers.push(newAction);\n            }\n            else {\n                savedAction.methodsAllowed = newAction.methodsAllowed;\n                savedAction.pattern = router.path == null ? savedAction.pattern : `/${router.path}${savedAction.pattern}`;\n            }\n        }\n    }\n\n    static addGuards(guards: Array<typeof GenericGuard>, className: string, actionName: string) {\n        const index = routerCollection.findIndex(x => x.controllerName === className);\n        const pattern = actionName.toLowerCase();\n        if (index < 0) {\n            routerCollection.push({\n                workers: [{\n                    workerName: actionName,\n                    guards: guards,\n                    methodsAllowed: null,\n                    pattern: pattern,\n                    values: []\n                }],\n                controller: null,\n                controllerName: className,\n                shields: [],\n                path: null,\n                values: []\n            });\n        }\n        else {\n            const savedAction = routerCollection[index].workers.find(val => val.workerName === actionName);\n            if (savedAction == null) {\n                routerCollection[index].workers.push({\n                    workerName: actionName,\n                    guards: guards,\n                    methodsAllowed: null,\n                    pattern: pattern,\n                    values: []\n                });\n            }\n            else {\n                savedAction.guards = guards;\n            }\n        }\n    }\n\n    static addPattern(pattern: string, className: string, actionName: string) {\n        const router = routerCollection.find(x => x.controllerName === className);\n        if (router == null) {\n            routerCollection.push({\n                workers: [{\n                    workerName: actionName,\n                    guards: [],\n                    methodsAllowed: null,\n                    pattern: pattern,\n                    values: []\n                }],\n                controller: null,\n                controllerName: className,\n                shields: [],\n                path: null,\n                values: []\n            });\n        }\n        else {\n            const savedAction = router.workers.find(val => val.workerName === actionName);\n            pattern = getActionPattern(router, pattern);\n            if (savedAction == null) {\n                router.workers.push({\n                    workerName: actionName,\n                    guards: [],\n                    methodsAllowed: null,\n                    pattern: pattern,\n                    values: []\n                });\n            }\n            else {\n                savedAction.pattern = pattern;\n            }\n        }\n    }\n}","\nimport { MIME_TYPE } from \"../enums\";\nimport { HTTP_STATUS_CODE } from \"../enums/http_status_code\";\nimport { HttpResult } from \"../types/http_result\";\n\nexport const downloadResult = (filePath: string, downloadFileName?: string) => {\n    return {\n        statusCode: HTTP_STATUS_CODE.Ok,\n        file: {\n            filePath: filePath,\n            shouldDownload: true,\n            alias: downloadFileName\n        }\n    } as HttpResult;\n};","\nimport { MIME_TYPE } from \"../enums\";\nimport { HTTP_STATUS_CODE } from \"../enums/http_status_code\";\nimport { HttpResult } from \"../types/http_result\";\n\nexport const fileResult = (filePath: string) => {\n    return {\n        statusCode: HTTP_STATUS_CODE.Ok,\n        file: {\n            filePath: filePath\n        }\n    } as HttpResult;\n};","import { DATA_TYPE } from \"../enums/data_type\";\n\nexport const getDataType = (value) => {\n    const type = typeof value;\n    switch (type) {\n        case 'object':\n            if (Array.isArray(value)) {\n                return DATA_TYPE.Array;\n            }\n        default:\n            return type;\n    }\n};","import { MIME_TYPE } from \"../enums\";\n\nexport const getMimeTypeFromExtension = (ext: string): MIME_TYPE => {\n    switch (ext) {\n        case \".htm\":\n        case \".html\":\n            return MIME_TYPE.Html;\n        case \".css\":\n            return MIME_TYPE.Css;\n        case \".js\":\n            return MIME_TYPE.Js;\n        case \".png\":\n            return MIME_TYPE.Png;\n        case \".woff\":\n            return MIME_TYPE.Woff;\n        case \".woff2\":\n            return MIME_TYPE.Woff2;\n        case \".json\":\n            return MIME_TYPE.Json;\n        case \".txt\":\n            return MIME_TYPE.Text;\n        case \".jpg\":\n        case \".jpeg\":\n            return MIME_TYPE.Jpeg;\n        case \".rtf\":\n            return MIME_TYPE.Rtf;\n        case \".ttf\":\n            return MIME_TYPE.Ttf;\n        case \".eot\":\n            return MIME_TYPE.Eot;\n        case '.otf':\n            return MIME_TYPE.Otf;\n        case \".swf\":\n            return MIME_TYPE.Swf;\n        case \".avi\":\n            return MIME_TYPE.Avi;\n        case \".Svg\":\n            return MIME_TYPE.Svg;\n        case \".pdf\":\n            return MIME_TYPE.Pdf;\n        case \".xml\":\n            return MIME_TYPE.Xml;\n        case \".csv\":\n            return MIME_TYPE.Csv;\n        case \".xls\":\n            return MIME_TYPE.Xls;\n        case \".xlsx\":\n            return MIME_TYPE.Xlsx;\n        case \".bmp\":\n            return MIME_TYPE.Bmp;\n        case \".gif\":\n            return MIME_TYPE.Gif;\n        default:\n            return \"application/octet-stream\" as MIME_TYPE;\n    }\n};","import { readFile } from \"fs-extra\";\nimport { isEnvProduction } from \"./is_env_production\";\nimport * as path from \"path\";\nimport { Global } from \"../global\";\nimport { __CurrentPath } from \"../constant\";\n\nconst viewCache = {\n\n};\nexport const getViewFromFile = async function (fileLocation: string): Promise<string> {\n    const readView = function () {\n        const pathOfView = path.join(__CurrentPath, `${Global.viewPath}/${fileLocation}`);\n        return readFile(pathOfView, {\n            encoding: 'utf8'\n        });\n    };\n\n    if (isEnvProduction()) {\n        if (viewCache[fileLocation] == null) {\n            viewCache[fileLocation] = await readView();\n        }\n        return viewCache[fileLocation];\n\n    }\n    return await readView();\n};","import { MIME_TYPE } from \"../enums\";\nimport { HTTP_STATUS_CODE } from \"../enums/http_status_code\";\nimport { HttpResult } from \"../types/http_result\";\n\nexport const htmlResult = (html: string, statusCode?: HTTP_STATUS_CODE) => {\n    return {\n        contentType: MIME_TYPE.Html,\n        responseData: html,\n        statusCode: statusCode || HTTP_STATUS_CODE.Ok\n    } as HttpResult;\n};","export * from './json_result';\nexport * from './text_result';\nexport * from './html_result';\nexport * from './render_view';\nexport * from './download_result';\nexport * from './file_result';\nexport * from './redirect_result';\nexport * from './view_result';\nexport * from './get_view_from_file';\nexport * from \"./promise\";\nexport * from './log_helper';\nexport * from './xml_helper';\nexport * from \"./get_mime_type_from_extension\";\nexport * from \"./parse_match_route\";\nexport * from \"./parse_cookie\";\nexport * from './json_helper';\nexport * from './remove_last_slash';\nexport * from './remove_first_slash';\nexport * from './reverse_loop';","export const isEnvDev = () => {\n    return process.env.NODE_ENV === 'development';\n};","export const isEnvProduction = () => {\n    return process.env.NODE_ENV === \"production\";\n};","import { IException } from \"../interfaces\";\n\nexport class JsonHelper {\n    static parse(value: string) {\n        try {\n            return JSON.parse(value);\n        }\n        catch (ex) {\n            // tslint:disable-next-line\n            throw {\n                message: \"Post data is invalid\"\n            } as IException;\n        }\n    }\n\n    static stringify(value) {\n        return JSON.stringify(value);\n    }\n}","\nimport { MIME_TYPE } from \"../enums\";\nimport { HTTP_STATUS_CODE } from \"../enums/http_status_code\";\nimport { HttpResult } from \"../types/http_result\";\n\nexport const jsonResult = (value: any, statusCode?: HTTP_STATUS_CODE) => {\n    return {\n        contentType: MIME_TYPE.Json,\n        responseData: value,\n        statusCode: statusCode || HTTP_STATUS_CODE.Ok\n    } as HttpResult;\n};","import { IError } from \"../interfaces/error\";\nimport { ERROR_TYPE } from \"../enums/error_type\";\n\nexport class LogHelper implements IError {\n    type: ERROR_TYPE;\n    message: string;\n    private info_: any;\n\n    constructor(type: ERROR_TYPE, info?: any) {\n        this.type = type;\n        this.info_ = info;\n        this.message = this.getMsg_();\n    }\n\n    throw() {\n        const errMsg = this.get();\n        throw JSON.stringify(errMsg);\n    }\n\n    static log(msg) {\n        console.log(msg);\n    }\n\n    logError() {\n        console.error(this.get());\n    }\n\n    logWarning() {\n        console.warn(this.get());\n    }\n\n    get() {\n        return {\n            message: this.message,\n            type: this.type\n        } as IError;\n    }\n\n    private getMsg_() {\n        let errMsg: string;\n        switch (this.type) {\n            case ERROR_TYPE.InvalidControllerName:\n                errMsg = `Invalid controller name - '${this.info_}'. Controller name must contain 'controller'.`;\n                break;\n            case ERROR_TYPE.InvalidContentType:\n                errMsg = `Content type - '${this.info_}' is not valid. Please create an issue if you think this is valid type.`;\n                break;\n            case ERROR_TYPE.PortInUse:\n                errMsg = `Port ${this.info_} is being used by another process.`;\n                break;\n            case ERROR_TYPE.UndefinedViewEngine:\n                errMsg = `View engine is not initiated.Initiate the view engine where fort is created.`;\n                break;\n            default:\n                errMsg = this.message;\n                break;\n        }\n        return errMsg;\n    }\n}","import { isNullOrEmpty } from \"../utils\";\n\n \n\n\nexport const parseCookie = (cookie: string): { [key: string]: string } => {\n    const value = {};\n    if (!isNullOrEmpty(cookie)) {\n        cookie.split(';').forEach((val) => {\n            const parts = val.split('=');\n            value[parts.shift().trim()] = decodeURI(parts.join('='));\n        });\n    }\n    return value;\n};","import { RouteHandler } from \"../handlers/route_handler\";\nimport { RouteMatch } from \"../types/route_match\";\nimport { HTTP_METHOD } from \"../enums\";\nimport { removeLastSlash } from \".\";\nimport { RouteInfo } from \"../types\";\n\nconst checkRouteInWorkerForDefaultRoute = (route: RouteInfo, httpMethod: HTTP_METHOD, urlParts: string[]) => {\n\n    const matchedRoute: RouteMatch = {\n        allowedHttpMethod: []\n    } as RouteMatch;\n    matchedRoute.controller = route.controller;\n    const urlPartLength = urlParts.length;\n\n    const regex1 = /{(.*)}(?!.)/;\n    const regex2 = /{(.*)}\\.(\\w+)(?!.)/;\n    route.workers.every(routeActionInfo => {\n        const patternSplit = routeActionInfo.pattern.split(\"/\");\n        if (urlPartLength === patternSplit.length) {\n            let isMatched = true;\n            const params = {};\n            urlParts.every((urlPart, i) => {\n                const regMatch1 = patternSplit[i].match(regex1);\n                const regMatch2 = patternSplit[i].match(regex2);\n                if (regMatch1 != null) {\n                    params[regMatch1[1]] = urlPart;\n                }\n                else if (regMatch2 != null) {\n                    const splitByDot = urlPart.split(\".\");\n                    if (splitByDot[1] === regMatch2[2]) {\n                        params[regMatch2[1]] = splitByDot[0];\n                    }\n                    else {\n                        isMatched = false;\n                        return false;\n                    }\n                }\n                else if (urlPart !== patternSplit[i]) {\n                    isMatched = false;\n                    return false;\n                }\n                return true;\n            });\n            if (isMatched === true) {\n                if (routeActionInfo.methodsAllowed.indexOf(httpMethod) >= 0) {\n                    matchedRoute.workerInfo = routeActionInfo;\n                    matchedRoute.params = params;\n                    matchedRoute.shields = route.shields;\n                    return false;\n                }\n                else {\n                    matchedRoute.allowedHttpMethod = [...matchedRoute.allowedHttpMethod, ...routeActionInfo.methodsAllowed];\n                }\n            }\n        }\n        return true;\n    });\n    if (matchedRoute.workerInfo == null && matchedRoute.allowedHttpMethod.length === 0) {\n        return null;\n    }\n    return matchedRoute;\n\n};\n\n\nconst checkRouteInWorker = (route: RouteInfo, httpMethod: HTTP_METHOD, urlParts: string[]) => {\n    const matchedRoute: RouteMatch = {\n        allowedHttpMethod: []\n    } as RouteMatch;\n    matchedRoute.controller = route.controller;\n    const urlPartLength = urlParts.length;\n    if (urlPartLength === 2) { // url does not have action path\n        const pattern = `/${route.path}/`;\n        route.workers.every(action => {\n            if (action.pattern === pattern) {\n                if (action.methodsAllowed.indexOf(httpMethod) >= 0) {\n                    matchedRoute.workerInfo = action;\n                    matchedRoute.params = {};\n                    matchedRoute.shields = route.shields;\n                    return false;\n                }\n                else {\n                    matchedRoute.allowedHttpMethod = [...matchedRoute.allowedHttpMethod, ...action.methodsAllowed];\n                }\n            }\n            return true;\n        });\n    }\n    else {\n        const regex1 = /{(.*)}(?!.)/;\n        const regex2 = /{(.*)}\\.(\\w+)(?!.)/;\n        route.workers.every(routeActionInfo => {\n            const patternSplit = routeActionInfo.pattern.split(\"/\");\n            if (urlPartLength === patternSplit.length) {\n                let isMatched = true;\n                const params = {};\n                urlParts.every((urlPart, i) => {\n                    const regMatch1 = patternSplit[i].match(regex1);\n                    const regMatch2 = patternSplit[i].match(regex2);\n                    if (regMatch1 != null) {\n                        params[regMatch1[1]] = urlPart;\n                    }\n                    else if (regMatch2 != null) {\n                        const splitByDot = urlPart.split(\".\");\n                        if (splitByDot[1] === regMatch2[2]) {\n                            params[regMatch2[1]] = splitByDot[0];\n                        }\n                        else {\n                            isMatched = false;\n                            return false;\n                        }\n                    }\n                    else if (urlPart !== patternSplit[i]) {\n                        isMatched = false;\n                        return false;\n                    }\n                    return true;\n                });\n                if (isMatched === true) {\n                    if (routeActionInfo.methodsAllowed.indexOf(httpMethod) >= 0) {\n                        matchedRoute.workerInfo = routeActionInfo;\n                        matchedRoute.params = params;\n                        matchedRoute.shields = route.shields;\n                        return false;\n                    }\n                    else {\n                        matchedRoute.allowedHttpMethod = [...matchedRoute.allowedHttpMethod, ...routeActionInfo.methodsAllowed];\n                    }\n                }\n            }\n            return true;\n        });\n    }\n    if (matchedRoute.workerInfo == null && matchedRoute.allowedHttpMethod.length === 0) {\n        return null;\n    }\n    return matchedRoute;\n\n};\n\nexport const parseAndMatchRoute = (url: string, httpMethod: HTTP_METHOD) => {\n    if (url !== \"/\") {\n        url = removeLastSlash(url);\n    }\n\n    const urlParts = url.split(\"/\");\n    const firstPart = urlParts[1];\n    let route = RouteHandler.routerCollection.find(qry => qry.path === firstPart);\n\n    if (route == null) {\n        route = RouteHandler.routerCollection.find(qry => qry.path === \"*\");\n        return checkRouteInWorkerForDefaultRoute(route, httpMethod, urlParts);\n    }\n    else {\n        return checkRouteInWorker(route, httpMethod, urlParts);\n    }\n};","export const promise = <T>(callBack: (resolve, reject) => void) => {\n    return new Promise<T>(callBack);\n};","import { MIME_TYPE } from \"../enums\";\nimport { HTTP_STATUS_CODE } from \"../enums/http_status_code\";\nimport { HttpResult } from \"../types/http_result\";\n\nexport const redirectResult = (url: string) => {\n    return {\n        contentType: MIME_TYPE.Text,\n        responseData: url,\n        statusCode: HTTP_STATUS_CODE.Redirect,\n        shouldRedirect: true\n    } as HttpResult;\n};","export const removeFirstSlash = function (value: string) {\n    // remove / from string at 0th index\n    if (value[0] === \"/\") {\n        return value.substr(1);\n    }\n    return value;\n};","export const removeLastSlash = (url: string) => {\n    const urlLength = url.length;\n    // removing / from url;\n    if (url[urlLength - 1] === \"/\") {\n        return url.substr(0, urlLength - 1);\n    }\n    return url;\n};","import { Global } from \"../global\";\nimport { isEnvDev } from \"./is_env_dev\";\nimport { LogHelper } from \"./log_helper\";\nimport { ERROR_TYPE } from \"../enums/error_type\";\n\nexport const renderView = (viewName: string, model?: any) => {\n    if (isEnvDev()) {\n        if (Global.viewEngine == null) {\n            new LogHelper(ERROR_TYPE.UndefinedViewEngine).throw();\n        }\n    }\n    return Global.viewEngine.render({\n        view: viewName,\n        model: model\n    });\n};","export const reverseLoop = function (values: any[], cb: (value, index: number) => void) {\n    for (let length = values.length, i = length - 1; i >= 0; i--) {\n        cb(values[i], i);\n    }\n};","import { MIME_TYPE } from \"../enums\";\nimport { HTTP_STATUS_CODE } from \"../enums/http_status_code\";\nimport { HttpResult } from \"../types/http_result\";\n\nexport const textResult = (text: string, statusCode?: HTTP_STATUS_CODE) => {\n    return {\n        contentType: MIME_TYPE.Text,\n        responseData: text,\n        statusCode: statusCode || HTTP_STATUS_CODE.Ok\n    } as HttpResult;\n};","import { renderView } from \"./render_view\";\nimport { HttpResult } from \"../types\";\nimport { MIME_TYPE, HTTP_STATUS_CODE } from \"../enums\";\n\n\nexport const viewResult = async (viewName: string, model?: any) => {\n    const viewData = await renderView(viewName, model);\n    return {\n        contentType: MIME_TYPE.Html,\n        responseData: viewData,\n        statusCode: HTTP_STATUS_CODE.Ok\n    } as HttpResult;\n};","import { getDataType } from \"./get_data_type\";\nimport { DATA_TYPE } from \"../enums/data_type\";\nimport * as jsontoxml from \"jsontoxml\";\n\nexport class XmlHelper {\n\n    static fromJsToXml(value) {\n        const addKeyToObjectIfNeeded = (key: string, obj) => {\n            const type = getDataType(obj);\n            if (type === DATA_TYPE.Object) {\n                const keys = Object.keys(obj);\n                if (keys.length !== 1) {\n                    obj = {\n                        [key]: obj\n                    };\n                }\n            }\n            return obj;\n        };\n        const dataType = getDataType(value);\n        switch (dataType) {\n            case DATA_TYPE.Array:\n                (value as []).forEach((val, index) => {\n                    value[index] = addKeyToObjectIfNeeded(\"item\", val);\n                });\n                value = {\n                    root: value\n                };\n                break;\n            case DATA_TYPE.Object:\n                value = addKeyToObjectIfNeeded(\"root\", value);\n\n        }\n        return jsontoxml(value, {\n            xmlHeader: true\n        });\n    }\n}","export * from './models';\nexport * from './abstracts';\nexport * from './decorators';\nexport * from './enums';\nexport * from './helpers';\nexport * from './types';\nexport * from './extra';\n// export * from './test_helpers';","import { HttpCookie } from \"./http_cookie\";\nimport { IHttpCookie } from \"../interfaces\";\n\nexport class CookieManager {\n    private responseCookie_: string[] = [];\n    private cookieCollection_: { [key: string]: string };\n\n    constructor(parsedValue: { [key: string]: string }) {\n        this.cookieCollection_ = parsedValue;\n    }\n\n    /**\n     * return cookie by name\n     *\n     * @param {string} name\n     * @returns\n     * @memberof CookieManager\n     */\n    getCookie(name: string): HttpCookie {\n        return {\n            name: name,\n            value: this.cookieCollection_[name]\n        } as IHttpCookie;\n    }\n\n    /**\n     * add cookie\n     *\n     * @param {HttpCookie} cookie\n     * @memberof CookieManager\n     */\n    addCookie(cookie: HttpCookie) {\n        this.cookieCollection_[cookie.name] = cookie.value;\n        this.responseCookie_.push(this.getCookieStringFromCookie_(cookie));\n    }\n\n    /**\n     * remove cookie\n     *\n     * @param {HttpCookie} cookie\n     * @memberof CookieManager\n     */\n    removeCookie(cookie: HttpCookie) {\n        this.cookieCollection_[cookie.name] = null;\n        cookie.expires = new Date('Thu, 01 Jan 1970 00:00:00 GMT');\n        cookie.maxAge = -1;\n        this.responseCookie_.push(this.getCookieStringFromCookie_(cookie));\n    }\n\n    /**\n     * collection of http cookie\n     *\n     * @readonly\n     * @memberof CookieManager\n     */\n    get cookieCollection() {\n        return this.cookieCollection_;\n    }\n\n    /**\n     * determine whether value exist or not\n     *\n     * @param {string} name\n     * @returns\n     * @memberof CookieManager\n     */\n    isExist(name: string) {\n        return this.cookieCollection_[name] != null;\n    }\n\n    private getCookieStringFromCookie_(cookie: HttpCookie) {\n        const cookies = [];\n        cookies.push(`${cookie.name}=${cookie.value}`);\n        if (cookie.expires) {\n            cookies.push(`Expires=${cookie.expires.toUTCString()}`);\n        }\n        if (cookie.httpOnly === true) {\n            cookies.push(\"HttpOnly\");\n        }\n        if (cookie.maxAge != null) {\n            cookies.push(`Max-Age=${cookie.maxAge}`);\n        }\n        if (cookie.path) {\n            cookies.push(`Path=${cookie.path}`);\n        }\n        if (cookie.domain) {\n            cookies.push(`Domain=${cookie.domain}`);\n        }\n        return cookies.join('; ');\n    }\n}","import { IException } from \"../interfaces\";\nimport { promise } from \"../helpers\";\n\nexport class ErrorHandler {\n    onServerError(ex: IException): Promise<string> {\n        return promise<string>((resolve, reject) => {\n            let errMessage = `<h1>internal server error</h1>\n            <h3>message : ${ex.message}</h3>`;\n            if (ex.stack) {\n                errMessage += `<p><b>stacktrace:</b> ${ex.stack}</p>`;\n            }\n            if (ex.type) {\n                errMessage += `<p><b>type:</b> ${ex.type}</p>`;\n            }\n            resolve(errMessage);\n        });\n    }\n\n    onBadRequest(ex: IException): Promise<string> {\n        return promise<string>((resolve, reject) => {\n            let errMessage = `<h1>Bad Request</h1>`;\n            if (ex.message) {\n                errMessage += ` <h3>message : ${ex.message} </h3>`;\n            }\n            if (ex.stack) {\n                errMessage += `<p><b>stacktrace:</b> ${ex.stack}</p>`;\n            }\n            if (ex.type) {\n                errMessage += `<p><b>type:</b> ${ex.type}</p>`;\n            }\n            resolve(errMessage);\n        });\n    }\n\n    onForbiddenRequest(): Promise<string> {\n        return promise<string>((resolve, reject) => {\n            const errMessage = `<h1>Forbidden</h1>`;\n            resolve(errMessage);\n        });\n    }\n\n    onNotAcceptableRequest(): Promise<string> {\n        return promise<string>((resolve, reject) => {\n            const errMessage = `<h1>Not Acceptable</h1>`;\n            resolve(errMessage);\n        });\n    }\n\n    onMethodNotAllowed(): Promise<string> {\n        return promise<string>((resolve, reject) => {\n            const errMessage = `<h1>Method Not allowed.</h1>`;\n            resolve(errMessage);\n        });\n    }\n\n    onNotFound(url: string): Promise<string> {\n        return promise<string>((resolve, reject) => {\n            const errMessage = `<h1>The requested resource ${url} was not found.</h1>`;\n            resolve(errMessage);\n        });\n    }\n}","import { HttpFile } from \"./http_file\";\nimport * as Fs from \"fs-extra\";\n\nlet files: { [fieldName: string]: HttpFile } = {};\nexport class FileManager {\n\n\n    /**\n     * get total no of files\n     *\n     * @returns - number\n     * @memberof FileManager\n     */\n    get count() {\n        return Object.keys(files).length;\n    }\n\n    get files() {\n        const results: HttpFile[] = [];\n        for (const file in files) {\n            results.push(files[file]);\n        }\n        return results;\n    }\n\n    set files(value) {\n        files = value as any;\n    }\n\n    /**\n     * check for existance of file\n     *\n     * @param {string} fieldName\n     * @returns\n     * @memberof FileManager\n     */\n    isExist(fieldName: string) {\n        return files[fieldName] != null;\n    }\n\n    /**\n     * return the file\n     *\n     * @param {string} fieldName\n     * @returns\n     * @memberof FileManager\n     */\n    getFile(fieldName: string) {\n        return files[fieldName];\n    }\n\n    /**\n     * saves file to supplied path\n     *\n     * @param {string} fieldName\n     * @param {string} pathToSave\n     * @returns\n     * @memberof FileManager\n     */\n    saveTo(fieldName: string, pathToSave: string) {\n        return Fs.copy(files[fieldName].path, pathToSave);\n    }\n}","import { ParentRoute, AppOption, EtagOption } from \"../types\";\nimport { Wall, ViewEngine, SessionProvider, XmlParser } from \"../abstracts\";\nimport { RouteHandler, RequestHandler } from \"../handlers\";\nimport { Global } from \"../global\";\nimport { MemorySessionProvider, MustacheViewEngine } from \"../extra\";\nimport { ErrorHandler } from \".\";\nimport { __AppName } from \"../constant\";\nimport * as http from \"http\";\nimport { ETag_Type, ERROR_TYPE } from \"../enums\";\nimport { LogHelper, promise, removeLastSlash, removeFirstSlash } from \"../helpers\";\nimport { GenericSessionProvider, GenericXmlParser, GenericController } from \"../generics\";\nimport { isNull, isNullOrEmpty, isArray } from \"../utils\";\n\nexport class Fort {\n    routes: ParentRoute[] = [];\n    walls: Array<typeof Wall> = [];\n    httpServer: http.Server;\n\n    /**\n     * view engine use to render the view\n     *\n     * @type {typeof ViewEngine}\n     * @memberof Fort\n     */\n    viewEngine?: typeof ViewEngine;\n\n    /**\n     * sessionProvider class, default - MemorySessionProvider\n     *\n     * @type {typeof SessionProvider}\n     */\n    sessionProvider?: typeof SessionProvider;\n\n    /**\n     * Custom error handler class\n     *\n     * @type {typeof ErrorHandler}\n     */\n    errorHandler?: typeof ErrorHandler;\n\n    /**\n     * XmlParser class - used to parse the xml \n     *\n     * @type {typeof XmlParser}\n     * @memberof Fort\n     */\n    xmlParser?: typeof XmlParser;\n\n    private saveAppOption_(option: AppOption) {\n        const defaultEtagConfig = {\n            type: ETag_Type.Weak\n        } as EtagOption;\n\n        Global.port = option.port == null ? 4000 : option.port;\n        Global.shouldParseCookie = option.shouldParseCookie == null ? true : option.shouldParseCookie;\n        Global.shouldParsePost = isNull(option.shouldParsePost) ? true : option.shouldParsePost;\n        Global.sessionTimeOut = isNull(option.sessionTimeOut) ? 60 : option.sessionTimeOut;\n        Global.folders = option.folders == null ? [] : option.folders;\n        if (isArray(Global.folders) === false) {\n            throw new Error(`Option folders should be an array`);\n        }\n        Global.appName = isNullOrEmpty(option.appName) === true ? __AppName : option.appName;\n        Global.appSessionIdentifier = `${Global.appName}_session_id`;\n        Global.eTag = isNull(option.eTag) ? defaultEtagConfig : option.eTag;\n        Global.walls = this.walls as any;\n        Global.viewEngine = isNull(this.viewEngine) ? new MustacheViewEngine() : new (this.viewEngine as any)();\n        Global.sessionProvider = isNull(this.sessionProvider) ? MemorySessionProvider as any :\n            this.sessionProvider as typeof GenericSessionProvider;\n        Global.errorHandler = isNull(this.errorHandler) ? ErrorHandler : this.errorHandler;\n        Global.xmlParser = isNull(this.xmlParser) ? GenericXmlParser : this.xmlParser;\n        Global.viewPath = isNull(option.viewPath) ? \"views\" : option.viewPath;\n    }\n\n    create(option?: AppOption): Promise<void> {\n        if (option == null) {\n            option = {\n\n            };\n        }\n\n        if (this.routes == null) {\n            this.routes = [];\n        }\n        let isDefaultRouteExist = false;\n        // removing / from routes\n        this.routes.forEach(route => {\n            route.path = removeFirstSlash(route.path);\n            route.path = removeLastSlash(route.path);\n            if (route.path === \"*\") {\n                isDefaultRouteExist = true;\n            }\n            RouteHandler.addToRouterCollection(route);\n        });\n        if (isDefaultRouteExist === false) {\n            RouteHandler.addToRouterCollection({\n                controller: GenericController,\n                path: \"*\"\n            });\n        }\n        if (option.folders != null) {\n            // remove / from files routes\n            option.folders.forEach(folder => {\n                const length = folder.alias.length;\n                if (length > 1) {\n                    folder.alias = removeFirstSlash(folder.alias);\n                    folder.alias = removeLastSlash(folder.alias);\n                }\n\n            });\n        }\n\n        this.saveAppOption_(option);\n        return promise((res, rej) => {\n            this.httpServer = http.createServer((request, response) => {\n                new RequestHandler(request, response).handle();\n            }).once(\"error\", (err) => {\n                if ((err as any).code === 'EADDRINUSE') {\n                    const error = new LogHelper(ERROR_TYPE.PortInUse, Global.port).get();\n                    rej(error);\n                }\n                else {\n                    rej(err);\n                }\n            }).once('listening', () => {\n                res();\n            }).listen(Global.port);\n        });\n    }\n\n    destroy(): Promise<void> {\n        return promise((res, rej) => {\n            this.httpServer.close(res);\n        });\n    }\n\n}\n","import { IHttpCookie } from \"../interfaces\";\n\nexport class HttpCookie implements IHttpCookie {\n    name: string;\n    value: string;\n    maxAge?: number;\n    expires?: Date;\n    domain?: string;\n    httpOnly?: boolean;\n    secure?: boolean;\n    path?: string;\n\n    constructor(name: string, value: string) {\n        this.name = name;\n        this.value = value;\n    }\n}","import { IncomingHttpHeaders } from \"http2\";\n\n \nexport class HttpFile {\n    /**\n     * same as name - the field name for this file\n     */\n    fieldName: string;\n    /**\n     * the filename that the user reports for the file\n     */\n    originalFilename: string;\n    /**\n     * the absolute path of the uploaded file on disk\n     */\n    path: string;\n    /**\n     * the HTTP headers that were sent along with this file\n     */\n    headers: IncomingHttpHeaders;\n    /**\n     * size of the file in bytes\n     */\n    size: number;\n\n}\n","export * from './error_handler';\nexport * from './http_cookie';\nexport * from './fort';\nexport * from './router';\nexport * from './cookie_manager';\nexport * from \"./file_manager\";\nexport * from \"./http_file\";","import { RouteInfo } from \"../types\";\nimport { RouteHandler } from \"../handlers\";\n\nexport class Router {\n    routes: RouteInfo[] = RouteHandler.routerCollection;\n}","import { HttpRequest } from \"../types\";\n\nexport class HttpRequestStub implements HttpRequest {\n    headers;\n\n    constructor(headers) {\n        this.headers = headers;\n    }\n}","import { HttpResponse } from \"../types\";\n\nexport class HttpResponseStub implements HttpResponse {\n    private headers_;\n    constructor(headers) {\n        this.headers_ = headers;\n    }\n\n    getHeader(name: string) {\n        return this.headers_[name];\n    }\n\n\n    hasHeader(name: string) {\n        return this.headers_[name] != null;\n    }\n\n    setHeader(name: string, value: number | string | string[]) {\n        this.headers_[name] = value;\n    }\n\n    getHeaders() {\n        return this.headers_;\n    }\n\n    getHeaderNames(): string[] {\n        return Object.keys[this.headers_];\n    }\n\n    removeHeader(name: string) {\n        delete this.headers_[name];\n    }\n}","export * from './init_controller';\n// export * from './init_guard';\n// export * from './init_shield';\n// export * from './init_wall';","\nimport { CookieManager, FileManager } from \"../models\";\nimport { Global } from \"../global\";\nimport { ControllerTestData } from \"../types\";\nimport { HttpResponseStub } from \"./http_response_stub\";\nimport { HttpRequestStub } from \"./http_request_stub\";\nimport { Controller } from \"../abstracts\";\n\n\n\nexport const initController = (controllerInstance: Controller, data?: ControllerTestData) => {\n    data = data || {};\n    const parsedCookies = data.cookieValue || {};\n    const headers = (data.request && data.request.headers) || {};\n    controllerInstance.request = new HttpRequestStub(headers);\n    controllerInstance.response = new HttpResponseStub(headers);\n    controllerInstance.query = data.query || {};\n    controllerInstance.body = data.body || {};\n    controllerInstance.cookie = new CookieManager(parsedCookies);\n    const session = new Global.sessionProvider();\n    session.cookie = controllerInstance.cookie;\n    session.sessionId = parsedCookies[Global.appSessionIdentifier];\n    controllerInstance.session = session;\n    controllerInstance.param = data.param || {};\n    controllerInstance.data = data.data || {};\n    controllerInstance.file = new FileManager();\n    return controllerInstance;\n};","\nimport { initController } from \"./init_controller\";\nimport { ControllerTestData } from \"../types\";\n\nexport type GuardTestData = ControllerTestData;\n\nexport const initGuard = (guardInstance, data?: GuardTestData) => {\n    return initController(guardInstance, data);\n};","\nimport { initController } from \"./init_controller\";\nimport { ControllerTestData } from \"../types\";\n\nexport type ShieldTestData = ControllerTestData & {\n    workerName?: string;\n};\n\nexport const initShield = (shieldInstance, data?: ShieldTestData) => {\n    const value: ShieldTestData = initController(shieldInstance, data) as any;\n    value.workerName = data.workerName;\n    return value;\n};","\nimport { initController } from \"./init_controller\";\nimport { ControllerTestData } from \"../types\";\n\nexport type WallTestData = ControllerTestData;\n\nexport const initWall = (wallInstance, data?: WallTestData) => {\n    return initController(wallInstance, data);\n};","export * from './is_null_or_empty';\nexport * from './is_null';\nexport * from './is_array';","export const isArray = (value) => {\n    return Array.isArray(value);\n};","export const isNull = (value) => {\n    return value == null;\n};","export const isNullOrEmpty = (value: string) => {\n    return value == null || value.length === 0;\n};","module.exports = require(\"content-type\");","module.exports = require(\"etag\");","module.exports = require(\"fresh\");","module.exports = require(\"fs\");","module.exports = require(\"fs-extra\");","module.exports = require(\"http\");","module.exports = require(\"jsontoxml\");","module.exports = require(\"multiparty\");","module.exports = require(\"mustache\");","module.exports = require(\"negotiator\");","module.exports = require(\"path\");","module.exports = require(\"querystring\");","module.exports = require(\"uniqid\");","module.exports = require(\"url\");"],"sourceRoot":""}